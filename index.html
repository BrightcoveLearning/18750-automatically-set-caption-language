<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Auto Captions Language</title>
</head>

<body>
  <video id="myPlayerID"
	  data-video-id="6008592337001"
		data-account="1752604059001"
		data-player="default"
		data-embed="default"
		data-application-id
		class="video-js"
		controls
		width="640"
		height="360"></video>
	<script src="//players.brightcove.net/1752604059001/default_default/index.min.js"></script>

  <script type="text/javascript">
    videojs.getPlayer("myPlayerID").ready(function () {
      var myPlayer = this;
      myPlayer.on("loadedmetadata", function () {
        // +++ Retrieve the menu options +++
        var menuOptions = myPlayer.controlBar.subsCapsButton.menu.children();

        // +++ Get the browser language +++
        var browser_language = navigator.language ||
                               navigator.userLanguage; // IE <= 10;
        browser_language = browser_language.substr(0,2);

        // +++ Loop through captions +++
        var track_language;
        menuOptions.forEach(function (item) {
          // +++ Set the default caption language +++
          // When the caption language equals the browser language, then set it as default

          if(typeof item.track.language !== 'undefined'){
            track_language = item.track.language.substr(0,2);
            if (track_language === browser_language) {
              item.track.mode = "showing";
            }
            else {
              item.track.mode = "disabled";
            }
          }

        });
      });
    });
  </script>

</body>

</html>
